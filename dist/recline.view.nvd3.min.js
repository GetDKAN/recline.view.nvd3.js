/*! recline.view.nvd3 v0.1 */
!function(a,b){"use strict";b.ChartOptionsView=Backbone.View.extend({template:'<div class="col-md-12" id="chart-with-controls"><div class="col-md-7"><ul class="nav nav-tabs" role="tablist" id="myTab"><li role="presentation" class="active"><a href="#chart-tab" aria-controls="home" role="tab" data-toggle="tab">Chart</a></li><li role="presentation"><a href="#dataset-tab" aria-controls="settings" role="tab" data-toggle="tab">Dataset</a></li></ul><div class="tab-content"><div role="tabpanel" class="tab-pane active" id="chart-tab"><div  id="chart-viewport"></div></div><div role="tabpanel" class="tab-pane" id="dataset-tab"><div id="pager"></div><div id="grid"></div></div></div></div><div class="col-md-5" id="controls"><div id="base-controls"></div><div id="extended-controls"></div></div></div><div class="col-md-12" id="controls"><div id="prev" class="btn btn-default pull-left">Back</div><button type="submit" class="form-submit btn btn-success pull-right">Finish</button></div>',initialize:function(a){var b=this;b.options=_.defaults(a||{},b.options),b.state=b.options.state,b.stepInfo={title:"Preview and Adjust",name:"chartOptions"}},render:function(){console.log("ChartOptionsView::render");var b=this,c=b.state.get("graphType");b.$el.html(Mustache.render(b.template,b.state.toJSON())),b.baseControls=new recline.View.nvd3.BaseControl({model:b.state.get("model"),state:b.state,parent:b}),b.extendedControls=new recline.View.nvd3[c+"Controls"]({model:b.state.get("model"),state:b.state}),b.graph=new recline.View.nvd3[c]({model:b.state.get("model"),state:b.state}),b.grid=new recline.View.SlickGrid({model:b.state.get("model"),el:a("#grid"),options:{}}),b.grid.visible=!0,b.assign(b.graph,"#chart-viewport"),b.assign(b.baseControls,"#base-controls"),b.assign(b.extendedControls,"#extended-controls"),b.assign(b.grid,"#grid"),a("#grid").closest(".tab-content").prev().find('a[data-toggle="tab"]').on("shown.bs.tab",function(){b.grid.grid.resizeCanvas()}),b.$(".chosen-select").chosen({width:"95%"})},updateState:function(a,b){b(a)},assign:function(a,b){var c=this;a.setElement(c.$(b)).render()}})}(jQuery,window),function(a,b){"use strict";b.ChooseChartView=Backbone.View.extend({template:'<div class="form-group"><ul id="chart-selector">{{#graphTypes}}<li class="{{value}} {{#selected}}selected{{/selected}}" data-selected="{{value}}"></li>{{/graphTypes}}</ul></div><div id="controls"><div id="prev" class="btn btn-default pull-left">Back</div><div id="next" class="btn btn-primary pull-right">Next</div></div>',initialize:function(a){var b=this;b.options=_.defaults(a||{},b.options),b.state=b.options.state,b.stepInfo={title:"Choose Chart",name:"chooseChart"}},events:{"click #chart-selector li":"selectChart"},selectChart:function(a){var b=this;b.$("li").removeClass("selected"),b.$(a.target).addClass("selected")},getSelected:function(){var a=this;return a.$("li.selected").data("selected")},render:function(){var a=this,b=["discreteBarChart","multiBarChart","stackedAreaChart","pieChart","lineChart","lineWithFocusChart","scatterChart","linePlusBarChart"];a.state.set("graphTypes",_.applyOption(_.arrayToOptions(b),[a.state.get("graphType")||"discreteBarChart"])),a.$el.html(Mustache.render(a.template,a.state.toJSON())),a.$(".chosen-select").chosen({width:"95%"})},updateState:function(a,b){var c=this,d=c.getSelected();a.set("graphType",d),b(a)}})}(jQuery,window),function(a,b){"use strict";b.DataOptionsView=Backbone.View.extend({template:'<div class="form-group"><label for="control-chart-series">Series</label><select id="control-chart-series" multiple class="form-control chosen-select">{{#fields}}<option value="{{value}}" {{#selected}} selected{{/selected}}>{{name}}</option>{{/fields}}</select></div><div class="form-group"><label for="control-chart-xfield">X-Field</label><select id="control-chart-xfield" class="form-control chosen-select">{{#xfields}}<option value="{{value}}" {{#selected}} selected{{/selected}}>{{name}}</option>{{/xfields}}</select></div><div class="form-group">{{#xDataTypes}}<label class="radio-inline"><input type="radio" name="control-chart-x-data-type" id="control-chart-x-data-type-{{value}}" value="{{value}}" {{#selected}}checked {{/selected}}> {{name}}</label>{{/xDataTypes}}</div><div id="controls"><div id="prev" class="btn btn-default pull-left">Back</div><div id="next" class="btn btn-primary pull-right">Next</div></div></div>',initialize:function(a){var b=this;b.options=_.defaults(a||{},b.options),b.state=b.options.state,b.stepInfo={title:"Define Variables",name:"dataOptions"}},render:function(){var a=this,b=["Number","String","Date","Auto"];a.state.set("fields",_.applyOption(_.arrayToOptions(_.getFields(a.state.get("model"))),a.state.get("seriesFields"))),a.state.set("xfields",_.applyOption(_.arrayToOptions(_.getFields(a.state.get("model"))),[a.state.get("xfield")])),a.state.set("xDataTypes",_.applyOption(_.arrayToOptions(b),[a.state.get("xDataType")||"Auto"])),a.$el.html(Mustache.render(a.template,a.state.toJSON())),a.$(".chosen-select").chosen({width:"95%"})},updateState:function(a,b){var c=this;a.set("seriesFields",c.$("#control-chart-series").val()),a.set("xfield",c.$("#control-chart-xfield").val()),a.set("xDataType",c.$("input[name=control-chart-x-data-type]:checked").val()),b(a)}})}(jQuery,window),function(a,b){"use strict";b.LoadDataView=Backbone.View.extend({template:'<div class="form-group"><label for="control-chart-source">Source</label><input value="{{source.url}}" type="text" id="control-chart-source" class="form-control" /></div><div id="controls"><div id="next" class="btn btn-primary pull-right">Next</div></div>',initialize:function(a){var b=this;b.options=_.defaults(a||{},b.options),b.state=b.options.state,b.model=b.options.model,b.stepInfo={title:"Load Data",name:"loadData"}},render:function(){var a=this;a.$el.html(Mustache.render(a.template,a.state.toJSON()))},updateState:function(a,b){var c=this,d=c.$("#control-chart-source").val(),e={backend:"csv",url:d};a.set("model",new recline.Model.Dataset(e)),a.set("source",e),a.get("model").fetch().done(function(){b(a)})}})}(jQuery,window),function(a,b){"use strict";b.MultiStageView=Backbone.View.extend({template:'<h3>{{title}}</h3><input type="hidden" value="{{state}}"/><div id="step"></div>',events:{"click #next":"nextStep","click #prev":"prevStep"},initialize:function(a){var b=this;b.options=_.defaults(a||{},b.options),b.state=b.options.state,b._currentView=null,b._currentStep=b.state.get("step")||0,b.steps=[],b.state.set("step",b._currentStep)},render:function(){var a=this;return a.currentView=a.getStep(a._currentStep),_.extend(a.currentView.stepInfo,{state:JSON.stringify(a.state.toJSON())}),a.$el.html(Mustache.render(a.template,a.currentView.stepInfo)),a.assign(a.currentView,"#step"),a},assign:function(a,b){var c=this;a.setElement(c.$(b)).render()},addStep:function(a){var b=this;b.steps.push(a)},getStep:function(a){var b=this;return b.steps[a]},nextStep:function(){var a=this;a.currentView.updateState(a.state,function(b){a.state=b,a._currentStep=a.getNext(a.steps,a._currentStep),a.state.set("step",a._currentStep),a.render()})},prevStep:function(){var a=this;a.currentView.updateState(a.state,function(b){a.state=b,a._currentStep=a.getPrev(a.steps,a._currentStep),a.state.set("step",a._currentStep),a.render()})},getNext:function(a,b){var c=a.length-1;return c===b?b:++b},getPrev:function(a,b){return b?--b:b}})}(jQuery,window),function(a,b){"use strict";b.PublishView=Backbone.View.extend({template:'<div class="col-md-12" id="chart-with-controls"><div class="col-md-7"><div  id="chart-viewport"></div></div><div class="col-md-5" id="controls"><div id="embed-control"></div></div></div><div class="col-md-12" id="controls"><div id="prev" class="btn btn-default pull-left">Back</div><div id="next" class="btn btn-success pull-right">Publish</div></div>',initialize:function(a){var b=this;b.options=_.defaults(a||{},b.options),b.state=b.options.state,b.stepInfo={title:"Publish and Share",name:"publish"}},render:function(){console.log("ChartOptionsView::render");var a=this,b=a.state.get("graphType");a.$el.html(Mustache.render(a.template,a.state.toJSON())),a.embedControl=new recline.View.nvd3.EmbedControl({model:a.state.get("model"),state:a.state,parent:a}),a.graph=new recline.View.nvd3[b]({model:a.state.get("model"),state:a.state}),a.assign(a.graph,"#chart-viewport"),a.assign(a.embedControl,"#embed-control"),a.$(".chosen-select").chosen({width:"95%"})},updateState:function(a,b){b(a)},assign:function(a,b){var c=this;a.setElement(c.$(b)).render()}})}(jQuery,window),this.recline=this.recline||{},function(a,b){"use strict";b.URLState=function(a){function c(a){var b=_.rest(_.toArray(arguments));return function(c){return _.isFunction(c[a])&&c[a].apply(c,b)}}var d,e,f=this,g={};f.currentState={},a=a||{},d=a.parser?new a.parser:new b.Parser,f._init=function(b){var d=f.transform(b,f.toState);_.each(g,c("update",d)),f.currentState=d,a.init&&a.init(d)},f.addDependency=function(a){g[a.name]=a},f.getCurrentState=function(){return f.currentState},f.getSerializedState=function(a){return f.transform(a,f.toParams)},f.transform=function(a,b){var c;return c=b(a)},f.toState=function(a){var b=d.inflate(decodeURI(a));return JSON.parse(b)},f.toParams=function(a){var b=JSON.stringify(a);return d.compress(b)},f.navigateToState=function(b){f.currentState=b,e.navigate(f.transform(b,f.toParams)),a.stateChange&&a.stateChange(b)};var h=Backbone.Router.extend({routes:{"*state":"defaultRoute"},defaultRoute:f._init});e=new h,Backbone.history.start()},b.Parser=function(){var a=this;a.compress=function(b){return a.escapeStrings(b)},a.inflate=function(b){return a.parseStrings(b)},a.escapeStrings=function(a){return a=a.replace("%","@@"),a=a.replace(/"([a-zA-Z-_.]+)"\s?:/g,"$1:"),a=a.replace(/\x20(?![^"]*("[^"]*"[^"]*)*$)/g,"++"),a.replace(/"([a-zA-Z0-9-#_.-|+]+)?"/g,"!$1")},a.parseStrings=function(a){return a=a.replace("@@","%"),a=a.replace(/([{,])([a-zA-Z-_.\+]+)\s?:/g,'$1"$2":'),a=a.replace(/![a-zA-Z0-9_. -\+]+/g,function(a){return a.replace(/\+\+/g," ")}),a.replace(new RegExp("!([a-zA-Z0-9-_# .-:%]+)?","g"),'"$1"')}}}(jQuery,this.recline),this.recline=this.recline||{},this.recline.View=this.recline.View||{},this.recline.View.nvd3=this.recline.View.nvd3||{},function(a,b){"use strict";function c(a){return a=a||"",a+(1e16*Math.random()).toFixed(0)}var d=640,e=480;b.Base=Backbone.View.extend({template:'<div class="recline-graph row">{{data}}<div class="{{columnClass}} {{viewId}}"style="display: block;"><div id="{{viewId}}"><svg version="1.1" xmlns="http://www.w3.org/2000/svg"  height="{{height}}" width="{{width}}"></svg></div></div></div> ',initialize:function(b){var d=this;d.$el=a(d.el),d.options=_.defaults(b||{},d.options);var e=_.merge({width:640,height:480,group:!1},d.getDefaults(),d.options.state.toJSON());d.graphType=d.graphType||"multiBarChart",d.uuid=c("nvd3chart_"),d.state=d.options.state,d.state.set(e),d.chartMap=d3.map(),d.state.listenTo(d.state,"change",d.render.bind(d))},getLayoutParams:function(){var a=this,b={columnClass:"col-md-12",width:a.state.get("width")||a.$el.innerWidth()||d,height:a.state.get("height")||e};return b},render:function(){var a,b,c,d=this;return c=d.getLayoutParams(),a=d.model.toTemplateJSON(),a.viewId=d.uuid,_.extend(a,c),b=Mustache.render(d.template,a),d.$el.html(b),d.$graph=d.$el.find(".panel."+a.viewId),d.trigger("chart:endDrawing"),d.series=d.createSeries(d.model.records),nv.addGraph(function(){d.chart=d.createGraph(d.graphType),d.chart.xAxis&&d.chart.xAxis.tickFormat&&d.chart.xAxis.tickFormat(d.xFormatter),d.chart.x2Axis&&d.chart.x2Axis.tickFormat(d.xFormatter);var a=d.needForceX(d.model.records,d.graphType);return d.state.set("computeXLabels",a,{silent:!0}),d.chart.yAxis&&d.chart.yAxis.axisLabelDistance(30),d3.select("#"+d.uuid+" svg").datum(d.series).transition().duration(d.state.get("transitionTime")||500).call(d.chart),"discreteBarChart"===d.graphType&&d.state.get("options")&&d.state.get("options").reduceXTicks&&d.reduceXTicks(),nv.utils.windowResize(d.updateChart.bind(d)),d.chart}),d},lightUpdate:function(){var a=this;a.series=a.createSeries(a.model.records),d3.select("#"+a.uuid+" svg").datum(a.series).transition().duration(500).call(a.chart)},updateChart:function(){var a=this;d3.select("#"+a.uuid+" svg").transition().duration(a.state.get("transitionTime")||500).call(a.chart)},reduceXTicks:function(){var a=this,b=a.getLayoutParams(a.state.get("mode"));d3.select(".nv-x.nv-axis > g").selectAll("g").filter(function(c,d){return d%Math.ceil(a.model.records.length/(b.width/100))!==0}).selectAll("text, line").style("opacity",0)},createSeries:function(a){var b,c,d,e=this;return e.state.get("xfield")&&e.getSeries()?(a=a.toJSON(),c=_.compose(_.inferType,_.iteratee(e.state.get("xfield"))),d=e.state.get("xDataType")&&"Auto"!==e.state.get("xDataType")?e.state.get("xDataType"):c(_.last(a)),e.xFormatter=e.getFormatter(d,e.state.get("xFormat")),b=_.map(e.getSeries(),function(b){var c={};return c.key=b,a=e.state.get("group")?_.reportBy(a,e.state.get("xfield"),e.state.get("seriesFields")):a,a=_.sortBy(a,e.state.get("sort")||e.state.get("xfield")),c.values=_.map(a,function(a,c){return e.state.get("computeXLabels")?(e.chartMap.set(c,e.x(a,e.state.get("xfield"))),{y:e.y(a,b),x:c,label:e.x(a,e.state.get("xfield"))}):{y:e.y(a,b),x:_.cast(e.x(a,e.state.get("xfield")),d)}}),c})):[]},needForceX:function(a,b){var c=this,d=c.state.get("xfield");return a=a.toJSON(),_.some(a,function(a){return"String"===_.inferType(a[d])})&&"discreteBarChart"!==b&&"multiBarChart"!==b},getFormatter:function(a,b){var c=this;if(c.state.get("computeXLabels"))return c.chartMap.get.bind(c.chartMap);var d={String:_.identity,Date:_.compose(d3.time.format(b||"%x"),_.instantiate(Date)),Number:d3.format(b||".02f")};return d[a]},setOptions:function(a,b){var c=this;for(var d in b){var e=b[d];_.isObject(e)&&!_.isArray(e)?c.setOptions(a[d],e):a&&_.isFunction(a[d])&&a[d](e)}},createGraph:function(a){var b=this,c=nv.models[a]();return b.setOptions(c,b.state.get("options")),c},getDefaults:function(){return{}},getState:function(){var a=this;return a.state.attributes},getSeries:function(){var a=this;return a.state.get("seriesFields")},x:function(a,b){return a[b]},y:function(a,b){return a[b]}})}(jQuery,recline.View.nvd3),this.recline=this.recline||{},this.recline.View=this.recline.View||{},function(a,b){"use strict";b.BaseControl=Backbone.View.extend({template:'<div id="control-chart-container"><div class="form-group"><label for="control-chart-x-format">X-Format</label><input value="{{xFormat}}" type="text" id="control-chart-x-format" class="form-control" /></div><div class="form-group"><label for="control-chart-label-x-rotation">Label X Rotation</label><input value="{{options.xAxis.rotateLabels}}" type="text" id="control-chart-label-x-rotation" class="form-control" /></div><div class="form-group"><label for="control-chart-transition-time">Transition Time</label><input value="{{transitionTime}}" type="text" id="control-chart-transition-time" class="form-control" /></div><div class="form-group"><label for="control-chart-color">Color</label><input class="form-control" type="text" id="control-chart-color" value="{{options.color}}"/></div><div class="form-group"><label for="control-chart-x-axis-label">X Axis Label</label><input class="form-control" type="text" id="control-chart-x-axis-label" value="{{options.xAxis.axisLabel}}"/></div><div class="form-group"><label for="control-chart-x-axis-label">Y Axis Label</label><input class="form-control" type="text" id="control-chart-y-axis-label" value="{{options.yAxis.axisLabel}}"/></div><div class="form-group checkbox"><label for="control-chart-group"><input type="checkbox" id="control-chart-group" value="{{group}}" {{#group}}checked{{/group}}/> Group by X-Field</label></div><div class="form-group checkbox"><label for="control-chart-show-tooltips"><input type="checkbox" id="control-chart-show-tooltips" {{#options.tooltips}}checked{{/options.tooltips}}/> Show Tooltips</label></div><div class="form-group checkbox"><label for="control-chart-reduce-ticks"><input type="checkbox" id="control-chart-reduce-ticks" {{#options.reduceXTicks}}checked{{/options.reduceXTicks}}/> Reduce Ticks</label></div></div>',initialize:function(a){var b=this;b.state=a.state,b.model=a.model,b.parent=a.parent},events:{'change input[type="checkbox"]':"update",'blur input[type="text"]':"update",'keydown input[type="text"]':"update","submit #control-chart":"update"},render:function(){var a=this;a.$el.html(Mustache.render(a.template,a.state.toJSON())),a.$(".chosen-select").chosen({width:"95%"})},update:function(a){var b=this,c={};("keydown"!==a.type||13===a.keyCode)&&(c=_.merge({},b.state.toJSON(),b.getUIState()),b.state.set(c))},getUIState:function(){var b,c=this,d={group:a("#control-chart-group").is(":checked"),transitionTime:a("#control-chart-transition-time").val(),xFormat:a("#control-chart-x-format").val()};return d.options=d.options||{},d.options.xAxis=d.options.xAxis||{},d.options.yAxis=d.options.yAxis||{},d.options.tooltips=c.$("#control-chart-show-tooltips").is(":checked"),d.options.reduceXTicks=c.$("#control-chart-reduce-ticks").is(":checked"),d.options.xAxis.rotateLabels=c.$("#control-chart-label-x-rotation").val(),b=_.invoke(c.$("#control-chart-color").val().split(","),"trim"),d.options.xAxis.axisLabel=a("#control-chart-x-axis-label").val(),d.options.yAxis.axisLabel=a("#control-chart-y-axis-label").val(),c.$("#control-chart-color").val()?d.options.color=b:d.options.color&&(console.log("deleting"),delete d.options.color),d}})}(jQuery,recline.View.nvd3),this.recline=this.recline||{},this.recline.View=this.recline.View||{},function(a,b){"use strict";b.cumulativeLineChart=recline.View.nvd3.Base.extend({initialize:function(a){var b=this;b.graphType="cumulativeLineChart",recline.View.nvd3.Base.prototype.initialize.call(b,a)},render:function(){var a=this;recline.View.nvd3.Base.prototype.render.call(a,{})},createSeries:function(a){var b=this;return a=a.toJSON(),b.chartMap=d3.map(),_.map(b.state.get("seriesFields"),function(c){var d={};return d.key=c,d.values=_.map(a,function(a,d){return b.chartMap.set(d,b.x(a)),{y:b.y(a,c),x:d,label:b.x(a)}}),d})},getDefaults:function(){var a=this;return{options:{useInteractiveGuideline:!0,tooltips:!0,xAxis:{tickFormat:function(b){return a.chartMap?a.chartMap.get(b):b}}}}}}),b.cumulativeLineChartControls=recline.View.nvd3.BaseControl.extend({})}(jQuery,recline.View.nvd3),this.recline=this.recline||{},this.recline.View=this.recline.View||{},function(a,b){"use strict";b.discreteBarChart=recline.View.nvd3.Base.extend({initialize:function(a){var b=this;b.graphType="discreteBarChart",recline.View.nvd3.Base.prototype.initialize.call(b,a)},render:function(){var a=this;recline.View.nvd3.Base.prototype.render.call(a,{})},getDefaults:function(){return{computeXLabels:!1,options:{tooltips:!0}}}}),b.discreteBarChartControls=recline.View.nvd3.BaseControl.extend({template:'<div class="form-group checkbox"><label for="control-chart-stagger-labels"><input type="checkbox" id="control-chart-stagger-labels" {{#options.staggerLabels}}checked{{/options.staggerLabels}}/> Stagger Labels</label></div><div class="form-group checkbox"><label for="control-chart-show-values"><input type="checkbox" id="control-chart-show-values" {{#options.showValues}}checked{{/options.showValues}}/> Show Values</label></div>',events:{'change input[type="checkbox"]':"update"},getUIState:function(){var a=this,b={options:{}};return b.options.showValues=a.$("#control-chart-show-values").is(":checked"),b.options.staggerLabels=a.$("#control-chart-stagger-labels").is(":checked"),b}})}(jQuery,recline.View.nvd3),this.recline=this.recline||{},this.recline.View=this.recline.View||{},function(a,b){"use strict";b.EmbedControl=recline.View.nvd3.BaseControl.extend({template:'<div class="form-group"><label for="control-chart-width">Width</label><input value="{{width}}" type="text" id="control-chart-width" class="form-control" /></div><div class="form-group"><label for="control-chart-height">Height</label><input value="{{height}}" type="text" id="control-chart-height" class="form-control" /></div><div class="form-group"><input type="hidden" value="{{serialized}}" class="form-control"/></div><div class="form-group"><label for="control-chart-embed">Embed Code</label><input value="{{embedCode}}" class="form-control"/></div><div class="form-group"><label for="control-chart-embed">Url</label><input value="{{url}}" class="form-control"/></div>',embedTmpl:'<iframe src="{{{source}}}" width="{{width}}" height="{{height}}" frameBorder="0" style="overflow:hidden" scrolling="no"></iframe>',events:{'change input[type="checkbox"]':"update",'blur input[type="text"]':"update",'keydown input[type="text"]':"update"},update:function(a){var b=this,c={};("keydown"!==a.type||13===parseInt(a.keyCode))&&(c=_.merge({},b.state.toJSON(),b.getUIState()),b.state.set(c,{silent:!0}))},getUIState:function(){var a=this,b={width:a.$("#control-chart-width").val(),height:a.$("#control-chart-height").val()};return b}})}(jQuery,recline.View.nvd3),this.recline=this.recline||{},this.recline.View=this.recline.View||{},function(a,b){"use strict";b.lineChart=recline.View.nvd3.Base.extend({initialize:function(a){var b=this;b.graphType="lineChart",recline.View.nvd3.Base.prototype.initialize.call(b,a),b.state.set("computeXLabels",!0)},render:function(){var a=this;recline.View.nvd3.Base.prototype.render.call(a,{})},getDefaults:function(){var a=this;return{options:{useInteractiveGuideline:!0,tooltips:!0,xAxis:{tickFormat:function(b){return a.chartMap?a.chartMap.get(b):b}}}}}}),b.lineChartControls=recline.View.nvd3.BaseControl.extend({template:'<div class="form-group checkbox"><label for="control-chart-compute-x-labels"><input type="checkbox" id="control-chart-compute-x-labels" {{#computeXLabels}}checked{{/computeXLabels}}/> X values as labels</label></div>',events:{'change input[type="checkbox"]':"update"},getUIState:function(){var a=this,b={options:{}};return b.computeXLabels=a.$("#control-chart-compute-x-labels").is(":checked"),b}})}(jQuery,recline.View.nvd3),this.recline=this.recline||{},this.recline.View=this.recline.View||{},function(a,b){"use strict";b.lineWithFocusChart=recline.View.nvd3.Base.extend({initialize:function(a){var b=this;b.graphType="lineWithFocusChart",recline.View.nvd3.Base.prototype.initialize.call(b,a),b.state.set("computeXLabels",!0)},render:function(){var a=this;recline.View.nvd3.Base.prototype.render.call(a,{})},getDefaults:function(){var a=this;return{options:{tooltips:!0,xAxis:{tickFormat:function(b){return a.chartMap?a.chartMap.get(b):b}}}}}}),b.lineWithFocusChartControls=recline.View.nvd3.BaseControl.extend({template:'<div class="form-group checkbox"><label for="control-chart-compute-x-labels"><input type="checkbox" id="control-chart-compute-x-labels" {{#computeXLabels}}checked{{/computeXLabels}}/> X values as labels</label></div>',events:{'change input[type="checkbox"]':"update"},getUIState:function(){var a=this,b={options:{}};return b.computeXLabels=a.$("#control-chart-compute-x-labels").is(":checked"),b}})}(jQuery,recline.View.nvd3),this.recline=this.recline||{},this.recline.View=this.recline.View||{},function(a,b){"use strict";b.multiBarChart=recline.View.nvd3.Base.extend({initialize:function(a){var b=this;b.graphType="multiBarChart",recline.View.nvd3.Base.prototype.initialize.call(b,a)},render:function(){var a=this;recline.View.nvd3.Base.prototype.render.call(a,{})},getDefaults:function(){return{computeXLabels:!1,options:{reduceXTicks:!0,tooltips:!0}}}}),b.multiBarChartControls=recline.View.nvd3.BaseControl.extend({template:'<div class="form-group checkbox"><label for="control-chart-stagger-labels"><input type="checkbox" id="control-chart-stagger-labels" {{#options.staggerLabels}}checked{{/options.staggerLabels}}/> Stagger Labels</label></div>',events:{'change input[type="checkbox"]':"update"},getUIState:function(){var a=this,b={options:{}};return b.computeXLabels=a.$("#control-chart-compute-x-labels").is(":checked"),b.options.staggerLabels=a.$("#control-chart-stagger-labels").is(":checked"),b}})}(jQuery,recline.View.nvd3),this.recline=this.recline||{},this.recline.View=this.recline.View||{},function(a,b){"use strict";b.multiBarHorizontalChart=recline.View.nvd3.Base.extend({initialize:function(a){var b=this;b.graphType="multiBarHorizontalChart",recline.View.nvd3.Base.prototype.initialize.call(b,a),b.state.set("computeXLabels",!1)},render:function(){var a=this;recline.View.nvd3.Base.prototype.render.call(a,{})},getDefaults:function(){return{options:{tooltips:!0,reduceXTicks:!1}}}}),b.multiBarHorizontalChartControls=recline.View.nvd3.BaseControl.extend({template:'<div class="form-group checkbox"><label for="control-chart-compute-x-labels"><input type="checkbox" id="control-chart-compute-x-labels" {{#computeXLabels}}checked{{/computeXLabels}}/> X values as labels</label></div>',events:{'change input[type="checkbox"]':"update"},getUIState:function(){var a=this,b={options:{}};return b.computeXLabels=a.$("#control-chart-compute-x-labels").is(":checked"),b}})}(jQuery,recline.View.nvd3),this.recline=this.recline||{},this.recline.View=this.recline.View||{},function(a,b){"use strict";b.pieChart=recline.View.nvd3.Base.extend({initialize:function(a){var b=this;b.graphType="pieChart",recline.View.nvd3.Base.prototype.initialize.call(b,a)},render:function(){var a=this;recline.View.nvd3.Base.prototype.render.call(a,{})},createSeries:function(a){var b=this;a=a.toJSON();var c=_.first(b.state.get("seriesFields"));return a=b.state.get("group")?_.reportBy(a,b.state.get("xfield"),b.state.get("seriesFields")):a,_.map(a,function(a){return{y:b.y(a,c),x:b.x(a,b.state.get("xfield"))}})},getDefaults:function(){return{options:{showLabels:!0,labelType:"percent",tooltips:!0}}}}),b.pieChartControls=recline.View.nvd3.BaseControl.extend({template:'<div class="form-group checkbox"><label for="control-chart-donut"><input type="checkbox" id="control-chart-donut" {{#options.donut}}checked{{/options.donut}}/> Donut</label></div>',events:{'change input[type="checkbox"]':"update"},getUIState:function(){var a=this,b={options:{}};return b.options.donut=a.$("#control-chart-donut").is(":checked"),b}})}(jQuery,recline.View.nvd3),this.recline=this.recline||{},this.recline.View=this.recline.View||{},function(a,b){"use strict";b.scatterChart=recline.View.nvd3.Base.extend({initialize:function(a){var b=this;b.graphType="scatterChart",recline.View.nvd3.Base.prototype.initialize.call(b,a),b.state.set("computeXLabels",!0)},render:function(){var a=this;recline.View.nvd3.Base.prototype.render.call(a,{})},getDefaults:function(){var a=this;return{options:{showDistX:!0,showDistY:!0,onlyCircles:!1,xAxis:{tickFormat:function(b){return a.chartMap?a.chartMap.get(b):b}}}}}}),b.scatterChartControls=recline.View.nvd3.BaseControl.extend({template:'<div class="form-group checkbox"><label for="control-chart-compute-x-labels"><input type="checkbox" id="control-chart-compute-x-labels" {{#computeXLabels}}checked{{/computeXLabels}}/> X values as labels</label></div>',events:{'change input[type="checkbox"]':"update"},getUIState:function(){var a=this,b={options:{}};return b.computeXLabels=a.$("#control-chart-compute-x-labels").is(":checked"),b}})}(jQuery,recline.View.nvd3),this.recline=this.recline||{},this.recline.View=this.recline.View||{},function(a,b){"use strict";b.stackedAreaChart=recline.View.nvd3.Base.extend({initialize:function(a){var b=this;b.graphType="stackedAreaChart",recline.View.nvd3.Base.prototype.initialize.call(b,a),b.state.set("computeXLabels",!0)},render:function(){var a=this;recline.View.nvd3.Base.prototype.render.call(a,{})},getDefaults:function(){return{options:{useInteractiveGuideline:!0,tooltips:!0,xAxis:{tickFormat:function(a){return d3.time.format("%Y")(new Date(a))}}}}}}),b.stackedAreaChartControls=recline.View.nvd3.BaseControl.extend({template:'<div class="form-group checkbox"><label for="control-chart-compute-x-labels"><input type="checkbox" id="control-chart-compute-x-labels" {{#computeXLabels}}checked{{/computeXLabels}}/> Force x as labels</label></div>',events:{'change input[type="checkbox"]':"update"},getUIState:function(){var a=this,b={options:{}};return b.computeXLabels=a.$("#control-chart-compute-x-labels").is(":checked"),b}})}(jQuery,recline.View.nvd3),jQuery(function(){"use strict";_.mixin({getFields:function(a){var b=[];try{b=_.pluck(a.fields.toJSON(),"id")}catch(c){console.error("Error retrieving dataset fields")}return b},applyOption:function(a,b){return _.map(a,function(a){return a.selected=_.inArray(b,a.value)?!0:!1,a})},arrayToOptions:function(a){return _.map(a,function(a){return{name:a,value:a,selected:!1}})}})});